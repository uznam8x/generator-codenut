{% macro create(props, attribs) %}
<article data-codenut="popover" {{arrtibs(attribs)}}>
  <a href="#" class="popover__title">{{props.title}}</a>
  <div class="popover__content">
    {% slot props.slot.default %}
    {% endslot %}
  </div>
</article>
{% endmacro %}

<script>
    (() => {
        const selector = {
            nut: '[data-codenut="popover"]',
            title: 'popover__title'
        };
        const focus = (evt) => {
            const self = evt.currentTarget;
            TweenMax.killTweensOf(self);
            self.classList.add('popover--visible');
            setTimeout(() => {
                self.classList.add('popover--focus');
            }, 1);

        };
        const blur = (evt) => {
            evt.currentTarget.classList.remove('popover--focus');
            TweenMax.to(evt.currentTarget, 1, {
                onComplete: function () {
                    this.target.classList.remove('popover--visible')
                }
            });

        };

        const init = () => {
            const component = document.documentElement.querySelectorAll(selector.nut);
            _.each(component, (node) => {
                if (!node.getAttribute('data-codenut-status')) {
                    const title = node.querySelector('.' + selector.title);
                    title.addEventListener('focus', focus);
                    title.addEventListener('mouseenter', focus);
                    title.addEventListener('mouseleave', blur);
                    title.addEventListener('focusout', blur);
                    node.setAttribute('data-codenut-status', 'initialized');
                }
            })
        };

        document.addEventListener('DOMModified', init);
        document.addEventListener('DOMContentLoaded', init);

        if (Codenut.debug) {
            console.log('%ccodenut component : "popover" initialize', 'color:#133783');
        }
    })();
</script>